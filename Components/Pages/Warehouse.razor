@page "/warehouse"
@using PraktikaApp.Models
@using PraktikaApp.Data
@inject ProductService Service

<PageTitle>–°–∫–ª–∞–¥ –ø—Ä–æ–¥—É–∫—Ü–∏–∏</PageTitle>

<h1>üì¶ –°–∫–ª–∞–¥ –≥–æ—Ç–æ–≤–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏</h1>

<p>–ó–¥–µ—Å—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –æ—Å—Ç–∞—Ç–∫–∏ –∏–∑ –Ω–∞—à–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.</p>

<!-- –ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç–æ–π, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ -->
@if (products == null)
{
    <p><em>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</em></p>
}
else
{
    <!-- –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è HTML —Ç–∞–±–ª–∏—Ü–∞ —Å –∫–ª–∞—Å—Å–∞–º–∏ Bootstrap –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã -->
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>ID</th>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</th>
                <th>–¶–µ–Ω–∞ (—Ä—É–±)</th>
                <th>–û—Å—Ç–∞—Ç–æ–∫ (—à—Ç)</th>
                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
            </tr>
        </thead>
        <tbody>
            <!-- –¶–∏–∫–ª foreach: –ø—Ä–æ—Ö–æ–¥–∏–º –ø–æ –∫–∞–∂–¥–æ–º—É —Ç–æ–≤–∞—Ä—É –≤ —Å–ø–∏—Å–∫–µ -->
            @foreach (var item in products)
            {
                <tr>
                    <td>@item.Id</td>
                    <td><strong>@item.Name</strong></td>
                    <td>@item.Price</td>
                    <!-- –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä–∞ –º–∞–ª–æ (–º–µ–Ω—å—à–µ 500), –≤—ã–¥–µ–ª–∏–º –∫—Ä–∞—Å–Ω—ã–º —Ü–≤–µ—Ç–æ–º -->
                    <td style="@(item.Stock < 500 ? "color: red; font-weight: bold;" : "")">
                        @item.Stock
                    </td>
                    <td>@item.Description</td>
                </tr>
            }
        </tbody>
    </table>
}
@code {
    // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
    private List<Product> products;

    // –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∫–æ–≥–¥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
    protected override void OnInitialized()
    {
        // –í—ã–∑—ã–≤–∞–µ–º –Ω–∞—à —Å–µ—Ä–≤–∏—Å –∏ –∑–∞–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î
        products = Service.GetProducts();
    }
}